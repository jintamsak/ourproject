<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>물품보관소 알리미-로그인 페이지</title>
        <!-- Favicon-->
        <link rel="icon" type="image/x-icon" href="assets/1.png" />
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="css/styles.css" rel="stylesheet" />
        <meta charset="utf-8"/>
        <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
        <meta name="viewport" content="user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, width=device-width"/>
        <meta name="google-signin-client_id" content="774838025247-v7vviefn9l2ggo4ioj0slq4bml2gopf7.apps.googleusercontent.com">
        <script src="http://apis.google.com/js/platform.js" async defer></script>
        <title>Login</title>
        <script src="//developers.kakao.com/sdk/js/kakao.min.js"></script>
        <link href="btn.css" type="text/css" rel="stylesheet">
        <link href="title.css" type="text/css" rel="stylesheet">
        <link href="box.css" type="text/css" rel="stylesheet">

    </head>
    <body>
        <!-- Responsive navbar-->
        <nav class="navbar navbar-expand-lg navbar-dark bg-secondary">
            <div class="container px-5">
                <a class="navbar-brand" href="#!" onclick="location.href='index.html'">물품보관소 알리미</a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
                        <li class="nav-item"><a class="nav-link active" aria-current="page" href="#!" onclick="location.href='login.html'">로그인</a></li>
                        <li class="nav-item"><a class="nav-link" href="#!" onclick="location.href='introduce.html'">물품보관소 알리미란?
                        </a></li>
                        <li class="nav-item"><a class="nav-link" href="#!" onclick="location.href='complain.html'">건의사항</a></li>
                        <li class="nav-item"><a class="nav-link" href="#!" onclick="location.href='made.html'">개발자정보</a></li>
                    </ul>
                </div>
            </div>
        </nav>
         
        <!-- Bootstrap core JS-->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js"></script>
        <!-- Core theme JS-->
        <script src="js/scripts.js"></script>
        <script src="/__/firebase/9.1.2/firebase-app-compat.js"></script>
        <script src="/__/firebase/9.1.2/firebase-auth-compat.js"></script>
        <script src="/__/firebase/9.1.2/firebase-firestore-compat.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
      
        <script src="/__/firebase/init.js?useEmulator=true"></script>
        <!-- <div style="font-weight:900;text-align: center; margin:0 auto; "> -->
        
        <div class="title">
          <h3>간편 로그인</h3>
        <div>
        <div class = "box">
          <div class="btn">
            <button type = "submit" id = "gologbtn"><img src="/btn_google_signin_dark_normal_web.png"></button>
          </div>
          <div>
            <a id="kakao-login-btn"></a>
            <a href="http://developers.kakao.com/logout"></a>
          </div>
        </div>
        

      <script src="https://apis.google.com/js/platform.js?onload=renderButton" async defer></script>
      
      <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.1.2/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.1.2/firebase-analytics.js";
        import { getAuth,signInWithPopup, GoogleAuthProvider} 
          from "https://www.gstatic.com/firebasejs/9.1.2/firebase-auth.js";
      
        const firebaseConfig = {
          apiKey: "AIzaSyCfqwwDug5XrA6cr9ZopoVK5IXboRygd78",
          authDomain: "homepage-5444c.firebaseapp.com",
          projectId: "homepage-5444c",
          storageBucket: "homepage-5444c.appspot.com",
          messagingSenderId: "239576212002",
          appId: "1:239576212002:web:d9bf826f74d4a018f5607b"
        };
        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);
      // const realdb = firebase.database();
        const auth = getAuth();
        const provider = new GoogleAuthProvider();
        const db = firebase.firestore();
        
      $('#gologbtn').click(function(){
        signInWithPopup(auth, provider).then((result) => {
          const credential = GoogleAuthProvider.credentialFromResult(result);
          const token = credential.accessToken;
          const user = result.user;
          alert("구글 로그인 성공")
          console.log(user);
          console.log("로그인 성공")
        }).catch((error) => {
          const errorCode = error.code;
          const errorMessage = error.message;
          const email = error.email;
          const credential = GoogleAuthProvider.credentialFromError(error);
        });
      })
    </script>
    <script type='text/javascript'>
    Kakao.init('ddce287755ead22c3780a5be13dd2666');
    Kakao.Auth.createLoginButton({
      container : '#kakao-login-btn',
      success:function(authObj) {
        // alert(JSON.stringify(authObj));
        alert("카카오 로그인 성공")
        Kakao.API.request({
        url:'/v2/user/me',
        success : (res) => {
          const kakao_account = res.kakao_account;
          console.log(kakao_account)
          console.log("로그인 성공")
        }
      })
    },
    fail:function(error) {
      alert(JSON.stringify(error));
        }
      })      
    </script>
              <!-- Footer-->
    <footer class="py-5 bg-secondary">
      <div class="container"><p class="m-0 text-center text-white">Copyright &copy; Astrafe</p></div>
    </footer>
  </body>
</html>
